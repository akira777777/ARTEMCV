    };

    const drawScanlines = () => {
      ctx.drawImage(scanlineCanvas, 0, 0, w, h);
    };

    const animate = () => {
      ctx.fillStyle = bgGradient;
      ctx.fillRect(0, 0, w, h);

      drawGrid();

      ctx.fillStyle = gradOverlay;
      ctx.fillRect(0, 0, w, h);

      drawParticles();
      drawHoverGlow();
      drawScanlines();

      animationId = requestAnimationFrame(animate);
    };

    animate();

    return () => {
      canvas.removeEventListener('mousemove', handleMouseMove);
      if (mouseAnimationId) {
        cancelAnimationFrame(mouseAnimationId);
      }
      cancelAnimationFrame(animationId);
      // Reset particle pool
      activeParticleCount = 0;
    };
  }, [isHovered]);

  const handleFocus = () => setIsHovered(true);
  const handleBlur = () => {
    setIsHovered(false);
    mouseRef.current = { x: 0, y: 0 };
  };

  return (
    <div
      className="w-full h-[360px] lg:h-[440px] rounded-[2.7rem] overflow-hidden relative bg-[#0f172a] cursor-crosshair transition-all"
      onMouseEnter={handleFocus}
      onMouseLeave={handleBlur}
      onFocus={handleFocus}
      onBlur={handleBlur}
      tabIndex={0}
      role="img"
